{# Reusable paper card component for email templates #}
{# Usage: {% include 'email/paper_card.html' %} #}
{# Expects: paper object in context #}

<div class="paper">
    <h2 class="paper-title">
        <a href="{{ paper.link }}" target="_blank">{{ paper.title|safe_html }}</a>
    </h2>

    {% if paper.author %}
    <div class="paper-meta paper-authors">
        {{ paper.author }}
    </div>
    {% endif %}

    <div class="paper-meta">
        {% if paper.origin %}
            <strong>{{ paper.origin }}</strong>
        {% endif %}
        {% if paper.published %}
            â€¢ Published: {{ paper.published.strftime('%Y-%m-%d') }}
        {% endif %}
    </div>

    {% if paper.score is defined %}
    <div class="paper-meta">
        <span class="paper-score {% if paper.score >= 0.8 %}score-high{% elif paper.score >= 0.5 %}score-medium{% else %}score-low{% endif %}">
            Score: {{ "%.2f"|format(paper.score) }}
        </span>
    </div>
    {% endif %}

    {% if paper.content %}
    <div class="paper-abstract">
        {{ paper.content|safe_html|truncate(500) }}
    </div>
    {% elif paper.tldr %}
    <div class="paper-abstract">
        <em>Summary:</em> {{ paper.tldr|safe_html }}
    </div>
    {% endif %}

    {% if base_url %}
    <div class="paper-links">
        <a href="{{ paper.link }}" target="_blank">ğŸ“„ Full Paper</a>
        {% if paper.id %}
        <a href="{{ base_url }}/paper/{{ paper.id }}" target="_blank">ğŸ§¾ Paper Details</a>
        {% endif %}
    </div>
    {% endif %}
</div>
